<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/quizConhecimentos.css">
    <link rel="icon" href="./assets/icon/The Office.svg" type="image/x-icon">
    <title>Quiz sobre The Office | DunderPedia</title>
</head>
<body>
    <div class="header">
         <div class="navbar">
            <img src="../assets/icon/2.svg" class="logo">
            <ul>
                <li><a href="dashboard.html">Dashboard</a></li>
            </ul>
        </div>
    </div>
    <div class="quiz-container" id="div_quiz">
        <h1 class="the">Scranton Trivia</h1>
        <h2>Teste o seu conhecimento sobre The Office!</h2>
        <div id="quiz-content">
        </div>
        <div onclick="iniciarQuiz()" id="botao-iniciar-quiz" class="button-start"><p>Iniciar Quiz</p></div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="footer-logo">
                <img src="../assets/icon/2.svg">
            </div>
            <div class="footer-copyrigth">
                <span>
                    Vitória Lemes Suliman © 2024
                </span>
                <br>
                <span>
                    Todos os direitos reservados
                </span>
            </div>
        </div>
    </div>
</body>

<script>
    var lista_perguntas = [
        {
            titulo: 'Qual é o nome do alter ego de Dwight Schrute?',
            opcoes: [' Prison Mike','Date Mike','Agent Michael Scarn','Recyclops'],
            numeroRespostaCerta: 4
        },
        {
            titulo: 'Qual é o nome da empresa que compra a Dunder Mifflin?',
            opcoes: ['Sabre','Utica Paper','Prince Family Paper', 'Staples'],
            numeroRespostaCerta: 1
        },
        {
            titulo: 'Um dos episódios mais famosos da série é o "The Injury", onde Michael queima seu pé acidentalmente em um(a)...?',
            opcoes: ['Um fogão', 'Um forno elétrico','Uma grelha com bacons','Uma fogueira'],
            numeroRespostaCerta: 3
        },
        {
            titulo: 'Qual é o sabor de iogurte favorito da Pam?',
            opcoes: ['Baunilha', 'Frutas Vermelhas','Chocolate', 'Morango'],
            numeroRespostaCerta: 2
        },
        {
            titulo: 'Onde o Jim pede a Pam em casamento?',
            opcoes: ['Na Dunder Mifflin', 'Em um restaurante','Em um posto de gasolina','Na praia'],
            numeroRespostaCerta: 3
        },
        {
            titulo: 'Qual é o nome dos prêmios anuais que Michael entrega aos funcionários?',
            opcoes: ['Os Scotts','Os Dummies','Os Dundies','Os Mifflins'],
            numeroRespostaCerta: 3
        },
        {
            titulo: 'Outro episódio muito famoso da série é o "Stress Relief", onde um personagem começa um incêndio com o objetivo de fazer um treinamento preventivo, qual personagem foi o responsável por causa um pânico generalizado no escritório?',
            opcoes: ['Dwight', 'Ryan','Michael','Creed' ],
            numeroRespostaCerta: 1
        },
        {
            titulo: 'Qual é o nome do gato que o Dwight deu para Angela?',
            opcoes: ['Bandit', 'Sprinkles','Garbage','Comstock'],
            numeroRespostaCerta: 3
        },
        {
            titulo: 'Quem é o gerente regional da Dunder Mifflin na primeira temporada?',
            opcoes: ['Dwight','Jim','Michael','Toby'],
            numeroRespostaCerta: 3
        },
        {
            titulo: 'Qual o nome da namorada do Jim na primeira temporada?',
            opcoes:['Katy','Pam','Karen','Cathy'],
            numeroRespostaCerta: 1
        }
        ];

        var indiceQuestaoAtual = 0;
        var pontuacao = 0;

        function iniciarQuiz() {
            document.getElementById('botao-iniciar-quiz').style.display = 'none';
            mostrarPergunta();
        }

        function mostrarPergunta() {
            if (indiceQuestaoAtual < lista_perguntas.length) {
                var pergunta = lista_perguntas[indiceQuestaoAtual];
                var opcoes = "";
                for (var i = 0; i < pergunta.opcoes.length; i++) {
                    opcoes += `<button onclick="responder(${i + 1})">${pergunta.opcoes[i]}</button>`
                }
                document.getElementById('quiz-content').innerHTML = `
                    <h3>${pergunta.titulo}</h3>
                    <div>
                        ${opcoes}
                    </div>
                `;
            } else {
                mostrarResultado();
            }
        }

        function responder(opcaoEscolhida) {
            var pergunta = lista_perguntas[indiceQuestaoAtual];
            if (opcaoEscolhida == pergunta.numeroRespostaCerta) {
                pontuacao++;
            }
            indiceQuestaoAtual++;
            mostrarPergunta();
        }

        function mostrarResultado() {
            fetch(`/resultado/1/${sessionStorage.ID_USUARIO}/${pontuacao}`, { method: "POST", cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Resultado inserido com sucesso!`);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
            .catch(function (error) {
                console.error(`Erro na inserção do resultado: ${error}`);
            });

            var resultado = `
                <h3>Você acertou ${pontuacao} de ${lista_perguntas.length} perguntas!</h3>
                <button onclick="reiniciarQuiz()">Reiniciar Quiz</button>
                <a href="dashboard.html"><button onclick="voltarDashboard()">Voltar para a Dashboard</button></a> 
            `;
            document.getElementById('quiz-content').innerHTML = resultado;
        }

        function reiniciarQuiz() {
            indiceQuestaoAtual = 0;
            pontuacao = 0;
            iniciarQuiz();
        }

       
        
        
</script>

