<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="quizPersonalidade.css">
    <link rel="icon" href="./assets/icon/The Office.svg" type="image/x-icon">
    <title>Quiz Personalidade | Dunder Pedia</title>
</head>
<body>

    <div class="quiz-container" id="div_quiz">
        <h1 class="the">Quiz de Personalidade da Filial Scranton</h1>
        <h2></h2>
        <div id="quiz-content">
        </div>
        <div id="botao-iniciar-quiz" onclick="iniciarQuiz()"><p>Iniciar Quiz</p></div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="footer-logo">
                <img src="../assets/icon/2.svg">
            </div>
            <div class="footer-copyrigth">
                <span>
                    Vitória Lemes Suliman © 2024
                </span>
                <br>
                <span>
                    Todos os direitos reservados
                </span>
            </div>
</body>
</html>

<script>

    var lista_perguntas = [
        {
         titulo:'Se um colega de trabalho está passando por um momento difícil, o que você faz?',
         opcoes: [
            {
                descricao:'Organizo uma confraternização para animá-lo',
                personagem:'Michael',
                descricao:'Escuto e ofereço conselhos.',
                personagem:'Pam',
                descricao:'Dou espaço para que ele possa refletir.',
                personagem:'Stanley',
                descricao:'Chamo ele para almoçar fora e conversar.',
                personagem:'Jim'

            }],
        },
        {
         titulo:'Qual é a sua ideia de um bom momento com amigos no escritório?',
         opcoes: [
            {
                descricao:'Organizar um jogo de perguntas e respostas.',
                personagem:'Dwight',
                descricao:'Participar de uma atividade criativa em grupo.',
                personagem:'Pam',
                descricao:' Assistir a um filme ou série juntos.',
                personagem:'Toby',
                descricao:'Sair para uma noite de jogos ou boliche.',
                personagem:'Jim'
            }],
        },
        {
         titulo:'Como você lida com conflitos entre amigos no trabalho?',
         opcoes: [
            {
                descricao:'Tento fazer uma mediação e resolver o problema.',
                personagem:'Michael',
                descricao:'Escuto ambos os lados e tento entender os sentimentos.',
                personagem:'Pam',
                descricao:'Evito o conflito e deixo que se resolvam sozinhos.',
                personagem:'Stanley',
                descricao:'Enfrento o problema diretamente e sugiro uma solução mais prática.',
                personagem:'Dwight'
            }],
        },
        {
        titulo:'Se você e seu amigo têm uma tarefa difícil para concluir, como você aborda a situação?',
        opcoes: [
            {
                descricao:'Divido a tarefa e faço uma competição amigável.',
                personagem:'Dwight',
                descricao:'Colaboro e trabalho junto para garantir que tudo saia perfeito.',
                personagem:'Pam',
                descricao:' Faço minha parte e confio que ele fará a dele.',
                personagem:'Stanley',
                descricao:'Procuro maneiras de tornar a tarefa mais divertida.',
                personagem:'Jim'

            }], 
        },
        {
        titulo:'Se você e um amigo discutem, como você lida com isso?',
        opcoes: [ 
            {
                descricao:'Tento resolver o problema imediatamente.',
                personagem: 'Michael',
                descricao:'Dou um tempo para esfriar a cabeça antes de conversar.',
                personagem: 'Pam',
                descricao:'Tento esquecer e seguir em frente sem tocar no assunto.',
                personagem: 'Jim',
                descricao:'Peço desculpas mesmo se eu não estiver errado.',
                personagem: 'Toby'
            }],  
        },
        {
        titulo:'O que você acha mais importante em uma amizade?',
        opcoes: [
            {
                descricao: 'Honestidade.',
                personagem: "Jim",
                descricao: 'Diversão.',
                personagem: 'Michael',
                descricao: 'Lealdade.',
                personagem: 'Dwight',
                descricao: 'Apoio mútuo.',
                personagem: 'Pam'
            }],  
        }
    ]

    var indiceQuestaoAtual = 0;
    var pontuacao = 0;
    var personagem = "";
    var michael = 0;
    var pam = 0;
    var jim = 0;
    var dwight = 0;
    var stanley = 0;
    var toby = 0;
    var creed = 0;
    
    function iniciarQuiz() {
            document.getElementById('botao-iniciar-quiz').style.display = 'none';
            mostrarPergunta();
        }
    
    function mostrarPergunta() {
            if (indiceQuestaoAtual < lista_perguntas.length) {
                var pergunta = lista_perguntas[indiceQuestaoAtual];
                var opcoes = "";
                for (var i = 0; i < pergunta.opcoes.length; i++) {
                    opcoes += `<button onclick="responder(${pergunta.opcoes[i].personagem})">${pergunta.opcoes[i].descricao}</button>`
                }
                document.getElementById('quiz-content').innerHTML = `
                    <h3>${pergunta.titulo}</h3>
                    <div>
                        ${opcoes}
                    </div>
                `;
            } else {
                mostrarResultado();
            }
        }

        function responder(opcaoEscolhida) {
            var pergunta = lista_perguntas[indiceQuestaoAtual];
            if (opcaoEscolhida == "Michael") {
                michael++;
            } else if(opcaoEscolhida == "Pam"){
                pam++;
            } else if(opcaoEscolhida == "Jim"){
                jim++;
            } else if(opcaoEscolhida == "Dwight"){
                dwight++;
            } else if(opcaoEscolhida == "Stanley"){
                stanley++;
            } else if (opcaoEscolhida == "Toby"){
                toby++;
            }
            indiceQuestaoAtual++;
            mostrarPergunta();
        }

        function mostrarResultado() {
            fetch(`/resultado/2/${sessionStorage.ID_USUARIO}/${pontuacao}`, { method: "POST", cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Resultado inserido com sucesso!`);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
            .catch(function (error) {
                console.error(`Erro na inserção do resultado: ${error}`);
            });

            var resultado = `
                <h3>Parabéns! Você se parace mais com ${personagem}!</h3>
                <button onclick="reiniciarQuiz()">Reiniciar Quiz</button>
            `;
            document.getElementById('quiz-content').innerHTML = resultado;
        }

        function reiniciarQuiz() {
            indiceQuestaoAtual = 0;
            pontuacao = 0;
            iniciarQuiz();
        }
</script>